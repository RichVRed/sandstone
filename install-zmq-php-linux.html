<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Sandstone</title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://bootswatch.com/sandstone/bootstrap.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
        <link rel="stylesheet" href="/sandstone/css/prism.css">
        <link rel="stylesheet" href="/sandstone/css/all.css">
    </head>
    <body>
        <nav class="navbar navbar-default navbar-fixed-top nav-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="/sandstone/">Sandstone</a>

        <ul class="nav navbar-nav navbar-right">
            <li>
                <a
                    href="https://github.com/eole-io/sandstone"
                    class="github-button"
                    aria-label="Star eole-io/sandstone on GitHub"
                    data-count-aria-label="# stargazers on GitHub"
                    data-count-api="/repos/eole-io/sandstone#stargazers_count"
                    data-count-href="/eole-io/sandstone/stargazers"
                    data-style="mega"
                >Star Sandstone</a>
            </li>
        </ul>
    </div>
</nav>


        <div class="jumbotron">
    <div class="container">
        <h1>Sandstone</h1>
        <p>Extends Silex PHP to easily mount a Websocket server working together with a RestApi.</p>
        <a href="/sandstone/examples/full.html" class="btn btn-lg btn-primary">Get started</a>
    </div>
</div>

<div class="container space-top">
    <div class="row">
        <div class="col-sm-3">
            <nav class="nav nav-left">
    <ul class="nav nav-pills nav-stacked">
        <li 
>
            <a href="/sandstone/">
                <i class="fa fa-home" aria-hidden="true"></i>
                Home
                <br>
                <span>Introduction + Basic usage</span>
            </a>
        </li>
        <li 
>
            <a href="/sandstone/examples/full.html">
                <i class="fa fa-code" aria-hidden="true"></i>
                Example: Full app
                <br>
                <span>RestApi + Websocket + Push</span>
            </a>
        </li>
        <li 
>
            <a href="/sandstone/examples/multichannel-chat.html">
                <i class="fa fa-code" aria-hidden="true"></i>
                Example: Chat server
                <br>
                <span>Websocket</span>
            </a>
        </li>
        <li 
>
            <a href="/sandstone/push-debug-profiler.html">
                <i class="fa fa-list-alt" aria-hidden="true"></i>
                Push debug profiler
                <br>
                <span>Enable that awesome debug tool !</span>
            </a>
        </li>
        <li 
>
            <a href="/sandstone/under-the-hood.html">
                <i class="fa fa-cogs" aria-hidden="true"></i>
                Under the hood
                <br>
                <span>Used libraries</span>
            </a>
        </li>
        <li class="active"
>
            <a href="/sandstone/install-zmq-php-linux.html">
                <i class="fa fa-archive" aria-hidden="true"></i>
                ZMQ Linux installation
                <br>
                <span>and php binding</span>
            </a>
        </li>
    </ul>
</nav>

        </div>
        <div class="col-sm-9">
            <h1 class="no-margin-top">Install ZMQ and php-zmq extension</h1>

<p>This documentation has been strongly inspired from
<a href="http://alexandervn.nl/2012/05/03/install-zeromq-php-ubuntu/">http://alexandervn.nl/2012/05/03/install-zeromq-php-ubuntu/</a>
(May 2012)
which installs ZeroMQ 2 on Ubuntu 11.10 and php 5.3.</p>

<p>This tuto installs a ZeroMQ 4 on a Raspberry Pi 3 with minimal Debian Jessie, php7.</p>

<h2 id="requirements">Requirements</h2>

<p>Make sure you have all the packages:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>sudo apt-get install build-essential libtool autoconf uuid-dev pkg-config git libsodium

<span class="c">## and PHP depending on your version, one of these set of packages:</span>
sudo apt-get install php7.0 php7.0-dev
sudo apt-get install php5 php5-dev
sudo apt-get install php php-dev
</code></pre>
</div>

<blockquote>
  <p><strong>Note for Ubuntu</strong>:
<code class="highlighter-rouge">libsodium</code> has another package name on ubuntu, it is <code class="highlighter-rouge">libsodium-dev</code>.</p>

  <p>Go to <a href="https://github.com/jonathanpmartins">Jonathan Prass Martins</a>’s gist to see how to install it:</p>

  <p><a href="https://gist.github.com/jonathanpmartins/2510f38abee1e65c6d92">https://gist.github.com/jonathanpmartins/2510f38abee1e65c6d92</a></p>
</blockquote>

<h2 id="install-zeromq">Install ZeroMQ</h2>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>wget https://archive.org/download/zeromq_4.1.4/zeromq-4.1.4.tar.gz <span class="c"># Latest tarball on 07/08/2016</span>
tar -xvzf zeromq-4.1.4.tar.gz
<span class="nb">cd </span>zeromq-4.1.4
./configure
make
sudo make install
sudo ldconfig
</code></pre>
</div>

<blockquote>
  <p><strong>Note</strong>:
Check the lastest tarball release here:
<a href="http://download.zeromq.org/#ZeroMQ_4">http://download.zeromq.org/#ZeroMQ_4</a></p>
</blockquote>

<h2 id="installing-the-php-binding">Installing the PHP binding</h2>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>git clone git://github.com/mkoppanen/php-zmq.git
<span class="nb">cd </span>php-zmq
phpize <span class="o">&amp;&amp;</span> ./configure
make
sudo make install
</code></pre>
</div>

<p>Then add <code class="highlighter-rouge">extension=zmq.so</code> in either:</p>

<ul>
  <li>your php.ini files (apache2 and cli ones)</li>
  <li>or in file <code class="highlighter-rouge">/etc/php/7.0/mods-available/zmq.ini</code>, then run <code class="highlighter-rouge">sudo phpenmod zmq</code></li>
</ul>

<p>Do a <code class="highlighter-rouge">sudo service apache2 restart</code></p>

<h2 id="check-that-its-well-installed">Check that it’s well installed</h2>

<p>Just create a php file in your <code class="highlighter-rouge">www/</code> folder and add this:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nb">class_exists</span><span class="p">(</span><span class="s1">'ZMQContext'</span><span class="p">));</span>
</code></pre>
</div>

<p>And run the file with <code class="highlighter-rouge">php my-file.php</code>, and from your browser, you should see <code class="highlighter-rouge">bool(true)</code>.</p>

<p>You can also check the installed ZMQ version from phpinfo.</p>

        </div>
    </div>
</div>


        <footer>
    <div class="container-fluid">
        <div class="text-center">
            <p>Sandstone is under <a href="https://github.com/eole-io/sandstone/blob/master/LICENSE">MIT license</a>.</p>
            <br />
            <p>
                Find me here:
                <br />
                <a href="https://github.com/alcalyn">
                    <i class="fa fa-github fa-lg" aria-hidden="true"></i>
                    alcalyn
                </a>
                -
                <a href="https://twitter.com/alcalyn_">
                    <i class="fa fa-twitter fa-lg" aria-hidden="true"></i>
                    alcalyn_
                </a>
            </p>
        </div>
    </div>
</footer>


        <script async defer src="https://buttons.github.io/buttons.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="/sandstone/js/prism.js"></script>
    </body>
</html>
